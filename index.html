<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Ø£Ø¯ÙˆØ§Øª Ø¹Ù…Ù„ÙŠØ©: Ø§Ù„Ø¹Ù…Ø± â€¢ Ø§Ù„ØªØ§Ø±ÙŠØ® â€¢ Ø§Ù„Ø¹Ù…Ù„Ø§Øª</title>
  <style>
    :root{
      --bg:#f8fafc;
      --card:#ffffff;
      --primary:#0d6efd; /* Ø£Ø²Ø±Ù‚ Ø§Ø­ØªØ±Ø§ÙÙŠ */
      --accent:#198754;  /* Ø£Ø®Ø¶Ø± Ù„Ù„ØªØ£ÙƒÙŠØ¯ */
      --text:#0f172a;
      --muted:#6b7280;
      --border:#e2e8f0;
    }
    *{box-sizing:border-box}
    body{margin:0;font-family:"Segoe UI", Tahoma, Arial, sans-serif;background:var(--bg);color:var(--text)}
    .container{max-width:1024px;margin:0 auto;padding:16px}
    header{
      background:var(--card);border-bottom:1px solid var(--border);
      position:sticky;top:0;z-index:10;
    }
    .head-wrap{display:flex;align-items:center;justify-content:space-between;gap:12px}
    h1{margin:0;color:var(--primary);font-size:22px}
    .tagline{color:var(--muted);font-size:13px;margin:2px 0 0}
    .nav{
      display:flex;gap:8px;flex-wrap:wrap;padding:12px 0;
    }
    .tab{
      background:#eff6ff;border:1px solid #bfdbfe;color:#1d4ed8;
      padding:8px 12px;border-radius:10px;cursor:pointer;font-weight:600;
    }
    .tab.active{background:var(--primary);border-color:var(--primary);color:#fff}
    .ad{
      background:#f1f5f9;border:2px dashed #cbd5e1;color:#64748b;
      text-align:center;padding:14px;border-radius:12px;margin:12px 0;font-size:14px;
    }
    .grid{display:grid;grid-template-columns:1fr 1fr;gap:16px}
    @media (max-width:800px){ .grid{grid-template-columns:1fr} }
    .card{
      background:var(--card);border:1px solid var(--border);border-radius:14px;
      padding:18px;box-shadow:0 6px 20px rgba(12,52,90,0.06);
    }
    h2{margin-top:0;font-size:18px}
    label{display:block;margin:8px 0 6px;font-weight:600}
    input, select{
      width:100%;padding:10px;border:1px solid var(--border);border-radius:10px;background:#fff;
    }
    .row{display:grid;grid-template-columns:1fr 1fr;gap:10px}
    .actions{margin-top:10px;display:flex;gap:8px;flex-wrap:wrap}
    button{
      background:var(--accent);color:#fff;border:none;border-radius:10px;padding:10px 14px;
      cursor:pointer;font-weight:700;
    }
    button.secondary{background:#0d6efd}
    button:active{transform:translateY(1px)}
    .result{
      margin-top:10px;background:#f8fafc;border:1px solid var(--border);
      padding:10px;border-radius:10px;font-weight:700;min-height:42px;display:flex;align-items:center
    }
    .note{color:var(--muted);font-size:12px;margin-top:6px}
    .loading{opacity:.7}
    footer{color:var(--muted);font-size:12px;text-align:center;padding:24px 0}
    .error{color:#b91c1c}
    .success{color:#0f766e}
  </style>
</head>
<body>
  <header>
    <div class="container head-wrap">
      <div>
        <h1>Ø£Ø¯ÙˆØ§ØªÙŠ Ø§Ù„Ø§Ø­ØªØ±Ø§ÙÙŠØ©</h1>
        <p class="tagline">Ø­Ø§Ø³Ø¨Ø© Ø§Ù„Ø¹Ù…Ø± â€¢ Ù…Ø­ÙˆÙ„ Ø§Ù„ØªØ§Ø±ÙŠØ® (Ù…ÙŠÙ„Ø§Ø¯ÙŠ â†” Ù‡Ø¬Ø±ÙŠ) â€¢ Ù…Ø­ÙˆÙ„ Ø§Ù„Ø¹Ù…Ù„Ø§Øª</p>
      </div>
    </div>
  </header>

  <main class="container">
    <!-- ğŸ”¹ Ø¥Ø¹Ù„Ø§Ù† Ø¹Ù„ÙˆÙŠ: Ø¹Ù†Ø¯ Ø§Ù„Ù…ÙˆØ§ÙÙ‚Ø© Ù…Ù† AdSense Ø§Ø³ØªØ¨Ø¯Ù„ÙŠ Ù‡Ø°Ø§ Ø§Ù„Ù€ div Ø¨ÙƒÙˆØ¯Ùƒ -->
    <div class="ad" id="ad-top">
      Ù…ÙƒØ§Ù† Ø¥Ø¹Ù„Ø§Ù† Ø¹Ù„ÙˆÙŠ â€” Ø¶Ø¹ÙŠ ÙƒÙˆØ¯ AdSense Ù‡Ù†Ø§ Ø¨Ø¹Ø¯ Ù†Ø´Ø± Ø§Ù„Ù…ÙˆÙ‚Ø¹
      <!-- Ù…Ø«Ø§Ù„ (Ø¶Ø¹ÙŠÙ‡ Ø¨Ø¹Ø¯ Ø§Ù„Ù…ÙˆØ§ÙÙ‚Ø©):
      <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-XXXX" crossorigin="anonymous"></script>
      <ins class="adsbygoogle" style="display:block" data-ad-client="ca-pub-XXXX" data-ad-slot="YYYY" data-ad-format="auto" data-full-width-responsive="true"></ins>
      <script>(adsbygoogle = window.adsbygoogle || []).push({});</script>
      -->
    </div>

    <nav class="nav" role="tablist" aria-label="Ø§Ù„ØªØ¨ÙˆÙŠØ¨">
      <button class="tab active" data-target="age">Ø­Ø§Ø³Ø¨Ø© Ø§Ù„Ø¹Ù…Ø±</button>
      <button class="tab" data-target="hijri">Ù…Ø­ÙˆÙ„ Ø§Ù„ØªØ§Ø±ÙŠØ®</button>
      <button class="tab" data-target="fx">Ù…Ø­ÙˆÙ„ Ø§Ù„Ø¹Ù…Ù„Ø§Øª</button>
    </nav>

    <section id="age" class="card tool">
      <h2>Ø­Ø§Ø³Ø¨Ø© Ø§Ù„Ø¹Ù…Ø±</h2>
      <label for="birth">ØªØ§Ø±ÙŠØ® Ø§Ù„Ù…ÙŠÙ„Ø§Ø¯</label>
      <input type="date" id="birth" />
      <div class="actions">
        <button id="calcAge">Ø§Ø­Ø³Ø¨ Ø§Ù„Ø¹Ù…Ø±</button>
        <button class="secondary" id="clearAge">Ù…Ø³Ø­</button>
      </div>
      <div id="ageOut" class="result" aria-live="polite"></div>
      <p class="note">ÙŠØªÙ… Ø§Ù„Ø­Ø³Ø§Ø¨ Ø¨Ø¯Ù‚Ø© (Ø³Ù†ÙˆØ§ØªØŒ Ø£Ø´Ù‡Ø±ØŒ Ø£ÙŠØ§Ù…) Ø­Ø³Ø¨ ØªÙ‚ÙˆÙŠÙ… Ø§Ù„Ù…ÙŠÙ„Ø§Ø¯ÙŠ.</p>
    </section>

    <section id="hijri" class="card tool" hidden>
      <h2>Ù…Ø­ÙˆÙ„ Ø§Ù„ØªØ§Ø±ÙŠØ® (Ù…ÙŠÙ„Ø§Ø¯ÙŠ â†” Ù‡Ø¬Ø±ÙŠ)</h2>
      <div class="grid">
        <div>
          <label for="gdate">Ù…ÙŠÙ„Ø§Ø¯ÙŠ âœ Ù‡Ø¬Ø±ÙŠ</label>
          <input type="date" id="gdate" />
          <div class="actions">
            <button id="toHijriBtn">ØªØ­ÙˆÙŠÙ„ Ø¥Ù„Ù‰ Ù‡Ø¬Ø±ÙŠ</button>
          </div>
          <div id="toHijriOut" class="result" aria-live="polite"></div>
        </div>
        <div>
          <label>Ù‡Ø¬Ø±ÙŠ âœ Ù…ÙŠÙ„Ø§Ø¯ÙŠ</label>
          <div class="row">
            <input type="number" id="hday" placeholder="Ø§Ù„ÙŠÙˆÙ…" min="1" max="30" />
            <input type="number" id="hmonth" placeholder="Ø§Ù„Ø´Ù‡Ø±" min="1" max="12" />
          </div>
          <input type="number" id="hyear" placeholder="Ø§Ù„Ø³Ù†Ø© (Ù…Ø«Ù„ 1445)" min="1" />
          <div class="actions">
            <button id="toGregBtn">ØªØ­ÙˆÙŠÙ„ Ø¥Ù„Ù‰ Ù…ÙŠÙ„Ø§Ø¯ÙŠ</button>
          </div>
          <div id="toGregOut" class="result" aria-live="polite"></div>
        </div>
      </div>
      <p class="note">Ø§Ù„ØªØ­ÙˆÙŠÙ„ ÙŠØ³ØªØ®Ø¯Ù… ÙˆØ§Ø¬Ù‡Ø© Ø¨Ø±Ù…Ø¬ÙŠØ© Ù…ÙˆØ«ÙˆÙ‚Ø© Ù„Ù„Ø­ØµÙˆÙ„ Ø¹Ù„Ù‰ Ø¯Ù‚Ø© Ø¹Ø§Ù„ÙŠØ©.</p>
    </section>

    <section id="fx" class="card tool" hidden>
      <h2>Ù…Ø­ÙˆÙ„ Ø§Ù„Ø¹Ù…Ù„Ø§Øª (Ø£Ø³Ø¹Ø§Ø± Ø­ÙŠØ©)</h2>
      <div class="row">
        <div>
          <label for="amount">Ø§Ù„Ù…Ø¨Ù„Øº</label>
          <input type="number" id="amount" placeholder="Ù…Ø«Ø§Ù„: 100" />
        </div>
        <div></div>
      </div>
      <div class="row">
        <div>
          <label for="from">Ù…Ù†</label>
          <select id="from">
            <option value="SAR">Ø±ÙŠØ§Ù„ Ø³Ø¹ÙˆØ¯ÙŠ (SAR)</option>
            <option value="USD">Ø¯ÙˆÙ„Ø§Ø± Ø£Ù…Ø±ÙŠÙƒÙŠ (USD)</option>
            <option value="EUR">ÙŠÙˆØ±Ùˆ (EUR)</option>
            <option value="AED">Ø¯Ø±Ù‡Ù… Ø¥Ù…Ø§Ø±Ø§ØªÙŠ (AED)</option>
            <option value="EGP">Ø¬Ù†ÙŠÙ‡ Ù…ØµØ±ÙŠ (EGP)</option>
          </select>
        </div>
        <div>
          <label for="to">Ø¥Ù„Ù‰</label>
          <select id="to">
            <option value="USD">Ø¯ÙˆÙ„Ø§Ø± Ø£Ù…Ø±ÙŠÙƒÙŠ (USD)</option>
            <option value="SAR" selected>Ø±ÙŠØ§Ù„ Ø³Ø¹ÙˆØ¯ÙŠ (SAR)</option>
            <option value="EUR">ÙŠÙˆØ±Ùˆ (EUR)</option>
            <option value="AED">Ø¯Ø±Ù‡Ù… Ø¥Ù…Ø§Ø±Ø§ØªÙŠ (AED)</option>
            <option value="EGP">Ø¬Ù†ÙŠÙ‡ Ù…ØµØ±ÙŠ (EGP)</option>
          </select>
        </div>
      </div>
      <div class="actions">
        <button id="convert">ØªØ­ÙˆÙŠÙ„</button>
        <button class="secondary" id="swap">ØªØ¨Ø¯ÙŠÙ„</button>
      </div>
      <div id="fxOut" class="result" aria-live="polite"></div>
      <p class="note">ÙŠØªÙ… Ø¬Ù„Ø¨ Ø§Ù„Ø£Ø³Ø¹Ø§Ø± Ø¹Ø¨Ø± Ø®Ø¯Ù…Ø© Ù…Ø¬Ø§Ù†ÙŠØ© Ù…ÙˆØ«ÙˆÙ‚Ø© (Ø¨Ø¯ÙˆÙ† Ù…ÙØªØ§Ø­ API).</p>
    </section>

    <!-- ğŸ”¹ Ø¥Ø¹Ù„Ø§Ù† Ø³ÙÙ„ÙŠ -->
    <div class="ad" id="ad-bottom">
      Ù…ÙƒØ§Ù† Ø¥Ø¹Ù„Ø§Ù† Ø³ÙÙ„ÙŠ â€” Ø¶Ø¹ÙŠ ÙƒÙˆØ¯ AdSense Ù‡Ù†Ø§ Ø¨Ø¹Ø¯ Ø§Ù„Ù†Ø´Ø±
    </div>
  </main>

  <footer>
    Â© Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø­Ù‚ÙˆÙ‚ Ù…Ø­ÙÙˆØ¸Ø© â€” Ù…ÙˆÙ‚Ø¹ Ø§Ù„Ø£Ø¯ÙˆØ§Øª
  </footer>

  <script>
    // ====== Ø§Ù„ØªØ¨ÙˆÙŠØ¨ ======
    document.querySelectorAll('.tab').forEach(btn=>{
      btn.addEventListener('click', ()=>{
        document.querySelectorAll('.tab').forEach(b=>b.classList.remove('active'));
        btn.classList.add('active');
        const target = btn.dataset.target;
        document.querySelectorAll('.tool').forEach(sec=>{
          sec.hidden = sec.id !== target;
        });
      });
    });

    // ====== 1) Ø­Ø§Ø³Ø¨Ø© Ø§Ù„Ø¹Ù…Ø± ======
    const birthEl = document.getElementById('birth');
    const ageOut = document.getElementById('ageOut');

    function calcAgeParts(birth, today=new Date()){
      // ÙŠØ­Ø³Ø¨ Ø³Ù†ÙˆØ§Øª/Ø£Ø´Ù‡Ø±/Ø£ÙŠØ§Ù… Ø¨Ø¯Ù‚Ø©
      let y = today.getFullYear() - birth.getFullYear();
      let m = today.getMonth() - birth.getMonth();
      let d = today.getDate() - birth.getDate();

      if (d < 0) {
        // Ø®Ø° Ø¹Ø¯Ø¯ Ø£ÙŠØ§Ù… Ø§Ù„Ø´Ù‡Ø± Ø§Ù„Ø³Ø§Ø¨Ù‚
        const prevMonthDays = new Date(today.getFullYear(), today.getMonth(), 0).getDate();
        d += prevMonthDays;
        m -= 1;
      }
      if (m < 0) {
        m += 12;
        y -= 1;
      }
      return {y, m, d};
    }

    document.getElementById('calcAge').addEventListener('click', ()=>{
      const v = birthEl.value;
      if(!v){ ageOut.innerHTML = '<span class="error">Ø±Ø¬Ø§Ø¡Ù‹ Ø§Ø®ØªØ± ØªØ§Ø±ÙŠØ® Ø§Ù„Ù…ÙŠÙ„Ø§Ø¯.</span>'; return; }
      const b = new Date(v);
      const {y,m,d} = calcAgeParts(b);
      ageOut.innerHTML = `<span class="success">Ø¹Ù…Ø±Ùƒ: ${y} Ø³Ù†Ø© Ùˆ ${m} Ø´Ù‡Ø± Ùˆ ${d} ÙŠÙˆÙ…</span>`;
    });

    document.getElementById('clearAge').addEventListener('click', ()=>{
      birthEl.value = '';
      ageOut.textContent = '';
    });

    // ====== 2) Ù…Ø­ÙˆÙ„ Ø§Ù„ØªØ§Ø±ÙŠØ® (API aladhan.com) ======
    const toHijriOut = document.getElementById('toHijriOut');
    const toGregOut = document.getElementById('toGregOut');

    async function gToH(dateStr){
      // dateStr Ø¨ØµÙŠØºØ© YYYY-MM-DD
      const url = `https://api.aladhan.com/v1/gToH?date=${dateStr}`;
      const res = await fetch(url);
      if(!res.ok) throw new Error('ÙØ´Ù„ Ø§Ù„Ø§ØªØµØ§Ù„');
      const data = await res.json();
      if(!data || !data.data || !data.data.hijri) throw new Error('Ø±Ø¯ ØºÙŠØ± Ù…ØªÙˆÙ‚Ø¹');
      const h = data.data.hijri;
      return { day:h.day, month:h.month.number, year:h.year, weekday:h.weekday.ar };
    }

    async function hToG(d,m,y){
      const url = `https://api.aladhan.com/v1/hToG?date=${d}-${m}-${y}`;
      const res = await fetch(url);
      if(!res.ok) throw new Error('ÙØ´Ù„ Ø§Ù„Ø§ØªØµØ§Ù„');
      const data = await res.json();
      if(!data || !data.data || !data.data.gregorian) throw new Error('Ø±Ø¯ ØºÙŠØ± Ù…ØªÙˆÙ‚Ø¹');
      const g = data.data.gregorian;
      return { day:g.day, month:g.month.number, year:g.year, weekday:g.weekday.en };
    }

    document.getElementById('toHijriBtn').addEventListener('click', async ()=>{
      const val = document.getElementById('gdate').value;
      if(!val){ toHijriOut.innerHTML = '<span class="error">Ø§Ø®ØªØ± ØªØ§Ø±ÙŠØ®Ø§Ù‹ Ù…ÙŠÙ„Ø§Ø¯ÙŠØ§Ù‹ Ø£ÙˆÙ„Ø§Ù‹.</span>'; return; }
      try{
        toHijriOut.textContent = '... Ø¬Ø§Ø±ÙŠ Ø§Ù„ØªØ­ÙˆÙŠÙ„';
        toHijriOut.classList.add('loading');
        const h = await gToH(val);
        toHijriOut.classList.remove('loading');
        toHijriOut.innerHTML = `<span class="success">Ø§Ù„ØªØ§Ø±ÙŠØ® Ø§Ù„Ù‡Ø¬Ø±ÙŠ: ${h.day} / ${h.month} / ${h.year} â€” ${h.weekday}</span>`;
      }catch(e){
        toHijriOut.classList.remove('loading');
        toHijriOut.innerHTML = '<span class="error">Ø­Ø¯Ø« Ø®Ø·Ø£ Ø£Ø«Ù†Ø§Ø¡ Ø§Ù„ØªØ­ÙˆÙŠÙ„. ØªØ­Ù‚Ù‚ÙŠ Ù…Ù† Ø§Ù„Ø§ØªØµØ§Ù„.</span>';
      }
    });

    document.getElementById('toGregBtn').addEventListener('click', async ()=>{
      const d = document.getElementById('hday').value;
      const m = document.getElementById('hmonth').value;
      const y = document.getElementById('hyear').value;
      if(!d || !m || !y){
        toGregOut.innerHTML = '<span class="error">Ø§Ø¯Ø®Ù„ÙŠ Ø§Ù„ÙŠÙˆÙ… ÙˆØ§Ù„Ø´Ù‡Ø± ÙˆØ§Ù„Ø³Ù†Ø© Ø§Ù„Ù‡Ø¬Ø±ÙŠØ© ÙƒØ§Ù…Ù„Ø©.</span>'; return;
      }
      try{
        toGregOut.textContent = '... Ø¬Ø§Ø±ÙŠ Ø§Ù„ØªØ­ÙˆÙŠÙ„';
        toGregOut.classList.add('loading');
        const g = await hToG(d,m,y);
        toGregOut.classList.remove('loading');
        toGregOut.innerHTML = `<span class="success">Ø§Ù„ØªØ§Ø±ÙŠØ® Ø§Ù„Ù…ÙŠÙ„Ø§Ø¯ÙŠ: ${g.day} / ${g.month} / ${g.year} â€” ${g.weekday}</span>`;
      }catch(e){
        toGregOut.classList.remove('loading');
        toGregOut.innerHTML = '<span class="error">Ø­Ø¯Ø« Ø®Ø·Ø£ Ø£Ø«Ù†Ø§Ø¡ Ø§Ù„ØªØ­ÙˆÙŠÙ„. ØªØ­Ù‚Ù‚ÙŠ Ù…Ù† Ø§Ù„Ø§ØªØµØ§Ù„.</span>';
      }
    });

    // ====== 3) Ù…Ø­ÙˆÙ„ Ø§Ù„Ø¹Ù…Ù„Ø§Øª (exchangerate.host) ======
    const fxOut = document.getElementById('fxOut');
    async function convertFX(amount, from, to){
      // Ø§Ø³ØªØ®Ø¯Ø§Ù… endpoint ØªØ­ÙˆÙŠÙ„ Ù…Ø¨Ø§Ø´Ø± (Ø¯Ù‚ÙŠÙ‚ + Ø¨Ø¯ÙˆÙ† Ù…ÙØªØ§Ø­)
      const url = `https://api.exchangerate.host/convert?from=${encodeURIComponent(from)}&to=${encodeURIComponent(to)}&amount=${encodeURIComponent(amount)}`;
      const res = await fetch(url);
      if(!res.ok) throw new Error('ÙØ´Ù„ Ø§Ù„Ø§ØªØµØ§Ù„');
      const data = await res.json();
      if(!data || typeof data.result !== 'number') throw new Error('Ø±Ø¯ ØºÙŠØ± Ù…ØªÙˆÙ‚Ø¹');
      return { result: data.result, info: data.info };
    }

    document.getElementById('convert').addEventListener('click', async ()=>{
      const amount = parseFloat(document.getElementById('amount').value);
      const from = document.getElementById('from').value;
      const to = document.getElementById('to').value;

      if(isNaN(amount) || amount <= 0){
        fxOut.innerHTML = '<span class="error">Ø£Ø¯Ø®Ù„ÙŠ Ù…Ø¨Ù„ØºØ§Ù‹ ØµØ§Ù„Ø­Ø§Ù‹ Ø£ÙƒØ¨Ø± Ù…Ù† 0.</span>'; return;
      }
      try{
        fxOut.textContent = '... Ø¬Ø§Ø±ÙŠ Ø§Ù„ØªØ­ÙˆÙŠÙ„';
        fxOut.classList.add('loading');
        const {result} = await convertFX(amount, from, to);
        fxOut.classList.remove('loading');
        fxOut.innerHTML = `<span class="success">${amount} ${from} = ${result.toFixed(4)} ${to}</span>`;
      }catch(e){
        fxOut.classList.remove('loading');
        fxOut.innerHTML = '<span class="error">ØªØ¹Ø°Ø± Ø¬Ù„Ø¨ Ø§Ù„Ø³Ø¹Ø±. ØªØ­Ù‚Ù‚ÙŠ Ù…Ù† Ø§Ù„Ø§ØªØµØ§Ù„ Ø«Ù… Ø£Ø¹ÙŠØ¯ÙŠ Ø§Ù„Ù…Ø­Ø§ÙˆÙ„Ø©.</span>';
      }
    });

    document.getElementById('swap').addEventListener('click', ()=>{
      const from = document.getElementById('from');
      const to = document.getElementById('to');
      const temp = from.value; from.value = to.value; to.value = temp;
    });
  </script>
</body>
</html>
